<script>
    function show_confirm_modal_data(data) {
        var data = JSON.parse(data);
        document.getElementById("con_cus_id").value = data.id
        document.getElementById("con_f_name").value = data.f_name + " " + data.l_name
        document.getElementById("con_card_num").value = data.card_num
        document.getElementById("con_p_num").value = data.p_num
        document.getElementById("con_email").value = data.email
        document.getElementById("con_reserv_id").value = data.reserv_id
        document.getElementById("con_room_number").value = data.num_room
        document.getElementById("con_room_type").value = data.name_th + " " + data.bed
        document.getElementById("con_check_in").value = data.checkin
        document.getElementById("con_check_out").value = data.checkout
        document.getElementById("con_more_info").value = data.more_info
    }

    function confirmRoom() {
        // show SweetAlert confirmation dialog
        Swal.fire({
            title: 'ต้องการยืนยันการเข้าพักหรือไม่',
            icon: 'warning',
            showCancelButton: true,
            confirmButtonText: 'ยืนยัน',
            cancelButtonText: 'ยกเลิก',
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33'
        }).then((result) => {
            if (result.isConfirmed) {
                var id = document.getElementById('con_reserv_id').value
                fetch('/confirmroom', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        id
                    })
                })
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }
                        return response.json();
                    })
                    .then(data => {
                        Swal.fire({
                            title: 'Success!',
                            text: 'ยืนยันการจองแล้ว',
                            icon: 'success',
                            timer: 1000,
                            timerProgressBar: true,
                            showConfirmButton: false
                        }).then(() => {
                            changepage('/indexroomconfirmation')
                        });


                    })
                    .catch(error => {
                        console.error('Error:', error);
                    });
            }
        })


    }
</script>