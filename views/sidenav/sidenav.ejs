<link rel="stylesheet" href="main.css">
<link rel="stylesheet" href="/sidenav_css/sidenav.css">
<link rel="stylesheet" href="/modal_css/modal.css">
<link rel="stylesheet" href="sweetalert2.min.css" />
<link rel="stylesheet" href="jquery.dataTables.min.css">

<script src="jquery.min.js"></script>

<script src="bootstrap.bundle.min.js"></script>

<script src="jquery.dataTables.min.js"></script>

<script src="sweetalert2.all.min.js"></script>

<script src="https://kit.fontawesome.com/4dd06c2468.js" crossorigin="anonymous"></script>

<div class="d-flex vh-100">
    <div class=" flex-column flex-shrink-0 p-3 text-white bg-dark sidenav" id="sidenav" style="width: 280px;">
        <div class="d-flex justify-content-end">
            <a href="#" class="btn btn-link back_button" id="back_button"><i class="fa-solid fa-left-long fa-lg" style="color: white"></i></a>
        </div>
        <a href="/reserve" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none">
            <svg class="bi me-2" width="40" height="32">
                <use xlink:href=""></use>
            </svg>
            <span class="fs-4">ส่วนพนักงาน</span>
        </a>
        <a>
            <hr>
        </a>
        <ul class="nav nav-pills flex-column mb-auto">
            <li>
                <a href="/reserve" class="nav-link text-white ">
                    <svg class="bi me-2 " width="16 " height="16 ">
                        <use xlink:href="# "></use>
                    </svg> จองห้องพัก
                </a>
            </li>
            <li class="nav-item">
                <a href="/indexroomconfirmation" class="nav-link text-white" aria-current="page">
                    <svg class="bi me-2" width="16" height="16">
                        <use xlink:href="#"></use>
                    </svg> ยืนยันสถานะห้อง
                </a>
            </li>
            <li class="nav-item">
                <a href="/checkout" class="nav-link text-white" aria-current="page">
                    <svg class="bi me-2" width="16" height="16">
                        <use xlink:href="#"></use>
                    </svg> เช็คเอาท์
                </a>
            </li>
            <li>
                <a href="/payment_history" class="nav-link text-white ">
                    <svg class="bi me-2 " width="16 " height="16 ">
                        <use xlink:href="# "></use>
                    </svg> รายการชำระเงิน
                </a>
            </li>
            <li>
                <a href="/history" class="nav-link text-white ">
                    <svg class="bi me-2 " width="16 " height="16 ">
                        <use xlink:href="# "></use>
                    </svg> ประวัติ
                </a>
            </li>
            <li>
                <a href="/maid_his" class="nav-link text-white ">
                    <svg class="bi me-2 " width="16 " height="16 ">
                        <use xlink:href="# "></use>
                    </svg> ประวัติการทำความสะอาด
                </a>
            </li>
        </ul>
        <a>
            <hr>
        </a>
        <a onclick="logout()" class="nav-link text-white " style="cursor: pointer;">
            <svg class="bi me-2 " width="16 " height="16 ">
                <use xlink:href="# "></use>
            </svg> ออกจากระบบ
        </a>
    </div>
    <main class="flex-grow-1 main-content" id="main_content" style="overflow: auto;">
        <div class="d-flex justify-content-start" style="cursor: pointer;" id="menu_button">
            <div class="px-3 menu_button">
                <span class=" menu-icon"></span>
            </div>
        </div>
        <script>
            function logout() {
                Swal.fire({
                    title: 'ต้องการออกจากระบบใช่หรือไม่',
                    showCancelButton: true,
                    confirmButtonText: 'ออกจากระบบ',
                }).then((result) => {
                    if (result.isConfirmed) {
                        fetch('/logout', {
                            method: 'POST'
                        })
                            .then(response => {
                                if (response.ok) {
                                    // Logout successful
                                    // Clear the URL by replacing it with the root path
                                    history.replaceState({}, '', '/');
                                    location.href = '/'
                                } else {
                                    // Logout failed
                                    console.log('Logout failed');
                                }
                            })
                            .catch(error => {
                                console.error('Error:', error);
                            });
                    }
                })
            }

            const sidenav = document.getElementById('sidenav');
            const main_content = document.getElementById('main_content')

            const menu_button = document.getElementById('menu_button')
            menu_button.onclick = function () {
                sidenav.classList.toggle('sidenav-active');
                main_content.classList.toggle('blur')
            }

            const back_button = document.getElementById('back_button')
            back_button.onclick = function () {
                sidenav.classList.remove('sidenav-active');
                main_content.classList.remove('blur')
            }
        </script>